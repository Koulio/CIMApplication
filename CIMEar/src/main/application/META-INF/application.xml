<?xml version="1.0" encoding="UTF-8"?>
<application
    xmlns="http://xmlns.jcp.org/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/application_7.xsd"
    version="7">

    <description>Application to access CIM files via Apache Spark</description>

    <display-name>CIMWeb</display-name>

    <module>
        <web>
            <web-uri>CIMWeb.war</web-uri>
            <context-root>/cimweb</context-root>
        </web>
    </module>

    <module>
        <connector>CIMConnector.rar</connector>
    </module>

    <!--  resource-ref>
        <description>Connection factory for Spark connection using CIMConnector</description>
        <res-ref-name>eis/SparkConnectionFactory</res-ref-name>
        <res-type>javax.resource.cci.ConnectionFactory</res-type>
        <res-auth>Application</res-auth>
        <res-sharing-scope>Shareable</res-sharing-scope>
        <lookup-name>openejb:Resource/CIMConnector.rar</lookup-name>
    </resource-ref -->

    <data-source>
        <description>JDBC connection factory to time series database</description>
        <name>java:app/jdbc/TimeSeries</name>
        <class-name>org.sqlite.JDBC</class-name>
        <url>jdbc:sqlite:/opt/apache-tomee-plus-7.0.1/database/timeseries.db</url>
    </data-source>

    <connection-factory>
        <description>Connection factory for Spark connection using CIMConnector</description>
        <name>java:app/eis/SparkConnectionFactory</name>
        <interface-name>ch.ninecode.cim.connector.CIMConnectionFactory</interface-name>
        <resource-adapter>CIMConnector</resource-adapter>
        <min-pool-size>2</min-pool-size>
        <transaction-support>NoTransaction</transaction-support>
    </connection-factory>

</application>
